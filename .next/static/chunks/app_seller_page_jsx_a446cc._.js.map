{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/duzur/Downloads/QuickCartv3/app/seller/page.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useAppContext } from \"@/context/AppContext\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst COLOR_HEX = {\r\n  White: \"#ffffff\",\r\n  Grey: \"#808080\",\r\n  Anthracite: \"#293133\",\r\n  Black: \"#000000\",\r\n  Mocca: \"#837060\",\r\n  Natural: \"#E1C699\",\r\n  \"Natural Black\": \"#1D1D1B\",\r\n  Chocolate: \"#7B3F00\",\r\n};\r\n\r\nexport default function AddProduct() {\r\n  const { getToken } = useAppContext();\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [category, setCategory] = useState(\"Earphone\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [offerPrice, setOfferPrice] = useState(\"\");\r\n  const [perSqFtPrice, setPerSqFtPrice] = useState(\"\");\r\n  const [perPanelSqFt, setPerPanelSqFt] = useState(\"\");\r\n  const [mainImages, setMainImages] = useState([]);\r\n  const [variants, setVariants] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Add new variant\r\n  const handleAddVariant = () => {\r\n    setVariants([...variants, { name: \"\", colors: [] }]);\r\n  };\r\n\r\n  // Add color to a variant\r\n  const handleAddColor = (variantIndex) => {\r\n    const updated = [...variants];\r\n    updated[variantIndex].colors.push({ name: \"\", price: \"\", image: null });\r\n    setVariants(updated);\r\n  };\r\n\r\n  // Change variant name\r\n  const handleVariantChange = (index, value) => {\r\n    const updated = [...variants];\r\n    updated[index].name = value;\r\n    setVariants(updated);\r\n  };\r\n\r\n  // Change color detail\r\n  const handleColorChange = (vIndex, cIndex, key, value) => {\r\n    const updated = [...variants];\r\n    updated[vIndex].colors[cIndex][key] = value;\r\n    setVariants(updated);\r\n  };\r\n\r\n  // Upload color image\r\n  const handleFileChange = (vIndex, cIndex, file) => {\r\n    const updated = [...variants];\r\n    updated[vIndex].colors[cIndex].image = file;\r\n    setVariants(updated);\r\n  };\r\n\r\n  // Upload main images handler\r\n  const handleMainImagesChange = (e) => {\r\n    setMainImages([...e.target.files]);\r\n  };\r\n\r\n  // Submit form\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"name\", name);\r\n      formData.append(\"description\", description);\r\n      formData.append(\"category\", category);\r\n      formData.append(\"price\", price);\r\n      formData.append(\"offerPrice\", offerPrice);\r\n      formData.append(\"perSqFtPrice\", perSqFtPrice);\r\n      formData.append(\"perPanelSqFt\", perPanelSqFt);\r\n\r\n      mainImages.forEach((file) => {\r\n        formData.append(\"images\", file);\r\n      });\r\n\r\n      const structuredVariants = variants.map((v, vIndex) => ({\r\n        name: v.name,\r\n        colors: v.colors.map((c, cIndex) => ({\r\n          name: c.name,\r\n          price: c.price,\r\n          imageFieldName: `variant${vIndex}-color${cIndex}`,\r\n        })),\r\n      }));\r\n\r\n      formData.append(\"variants\", JSON.stringify(structuredVariants));\r\n\r\n      variants.forEach((v, vIndex) => {\r\n        v.colors.forEach((c, cIndex) => {\r\n          if (c.image) {\r\n            formData.append(`variant${vIndex}-color${cIndex}`, c.image);\r\n          }\r\n        });\r\n      });\r\n\r\n      const token = await getToken();\r\n\r\n      const res = await axios.post(\"/api/product/add\", formData, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (res.data.success) {\r\n        toast.success(res.data.message);\r\n        setName(\"\");\r\n        setDescription(\"\");\r\n        setCategory(\"LINERIO\");\r\n        setPrice(\"\");\r\n        setOfferPrice(\"\");\r\n        setPerSqFtPrice(\"\");\r\n        setPerPanelSqFt(\"\");\r\n        setMainImages([]);\r\n        setVariants([]);\r\n      } else {\r\n        toast.error(res.data.message);\r\n      }\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.message || err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-6\">Add New Product</h2>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Basic Fields */}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Product Name\"\r\n          className=\"w-full p-3 border rounded\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          required\r\n        />\r\n        <textarea\r\n          placeholder=\"Description\"\r\n          className=\"w-full p-3 border rounded\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          required\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Category\"\r\n          className=\"w-full p-3 border rounded\"\r\n          value={category}\r\n          onChange={(e) => setCategory(e.target.value)}\r\n          required\r\n        />\r\n\r\n        {/* Pricing */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Original Price\"\r\n            className=\"p-3 border rounded\"\r\n            value={price}\r\n            onChange={(e) => setPrice(e.target.value)}\r\n            required\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Sale Price\"\r\n            className=\"p-3 border rounded\"\r\n            value={offerPrice}\r\n            onChange={(e) => setOfferPrice(e.target.value)}\r\n            required\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n          />\r\n        </div>\r\n\r\n        {/* Extra pricing */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Price Per sq.ft\"\r\n            className=\"p-3 border rounded\"\r\n            value={perSqFtPrice}\r\n            onChange={(e) => setPerSqFtPrice(e.target.value)}\r\n            required\r\n            min=\"0\"\r\n            step=\"0.01\"\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Sq.ft Per Panel\"\r\n            className=\"p-3 border rounded\"\r\n            value={perPanelSqFt}\r\n            onChange={(e) => setPerPanelSqFt(e.target.value)}\r\n            required\r\n            min=\"0\"\r\n            step=\"0.001\"\r\n          />\r\n        </div>\r\n\r\n        {/* Main Images */}\r\n        <div>\r\n          <label className=\"block font-semibold mb-2\">Main Images (multiple):</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            multiple\r\n            onChange={handleMainImagesChange}\r\n            className=\"w-full p-2 border rounded\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        {/* Variants */}\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold mb-4\">Variants</h3>\r\n          {variants.map((variant, vIndex) => (\r\n            <div key={vIndex} className=\"border p-4 rounded mb-6 bg-gray-50\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Variant Name (e.g., S-Line)\"\r\n                className=\"w-full mb-4 p-3 border rounded\"\r\n                value={variant.name}\r\n                onChange={(e) => handleVariantChange(vIndex, e.target.value)}\r\n                required\r\n              />\r\n\r\n              {variant.colors.map((color, cIndex) => (\r\n                <div\r\n                  key={cIndex}\r\n                  className=\"grid grid-cols-4 gap-4 items-center mb-4\"\r\n                >\r\n                  <select\r\n                    className=\"p-2 border rounded\"\r\n                    value={color.name}\r\n                    onChange={(e) =>\r\n                      handleColorChange(vIndex, cIndex, \"name\", e.target.value)\r\n                    }\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select Color</option>\r\n                    {Object.keys(COLOR_HEX).map((colorName) => (\r\n                      <option key={colorName} value={colorName}>\r\n                        {colorName}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  <div\r\n                    className=\"w-10 h-10 rounded-full border\"\r\n                    style={{ backgroundColor: COLOR_HEX[color.name] || \"#ccc\" }}\r\n                  ></div>\r\n\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Color Price\"\r\n                    className=\"p-2 border rounded\"\r\n                    value={color.price}\r\n                    onChange={(e) =>\r\n                      handleColorChange(vIndex, cIndex, \"price\", e.target.value)\r\n                    }\r\n                    required\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                  />\r\n\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    className=\"p-2\"\r\n                    onChange={(e) =>\r\n                      handleFileChange(vIndex, cIndex, e.target.files[0])\r\n                    }\r\n                    required\r\n                  />\r\n                </div>\r\n              ))}\r\n\r\n              <button\r\n                type=\"button\"\r\n                className=\"text-blue-600 hover:underline\"\r\n                onClick={() => handleAddColor(vIndex)}\r\n              >\r\n                + Add Color\r\n              </button>\r\n            </div>\r\n          ))}\r\n\r\n          <button\r\n            type=\"button\"\r\n            className=\"text-green-600 hover:underline\"\r\n            onClick={handleAddVariant}\r\n          >\r\n            + Add Variant\r\n          </button>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <button\r\n          type=\"submit\"\r\n          className={`w-full py-3 mt-6 text-white rounded ${\r\n            loading ? \"bg-gray-500 cursor-not-allowed\" : \"bg-blue-600 hover:bg-blue-700\"\r\n          }`}\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Submitting...\" : \"Submit Product\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AADA;;;AAJA;;;;;;AAOA,MAAM,YAAY;IAChB,OAAO;IACP,MAAM;IACN,YAAY;IACZ,OAAO;IACP,OAAO;IACP,SAAS;IACT,iBAAiB;IACjB,WAAW;AACb;AAEe,SAAS;;IACtB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,yHAAA,CAAA,gBAAa,AAAD;IAEjC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,kBAAkB;IAClB,MAAM,mBAAmB;QACvB,YAAY;eAAI;YAAU;gBAAE,MAAM;gBAAI,QAAQ,EAAE;YAAC;SAAE;IACrD;IAEA,yBAAyB;IACzB,MAAM,iBAAiB,CAAC;QACtB,MAAM,UAAU;eAAI;SAAS;QAC7B,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC;YAAE,MAAM;YAAI,OAAO;YAAI,OAAO;QAAK;QACrE,YAAY;IACd;IAEA,sBAAsB;IACtB,MAAM,sBAAsB,CAAC,OAAO;QAClC,MAAM,UAAU;eAAI;SAAS;QAC7B,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG;QACtB,YAAY;IACd;IAEA,sBAAsB;IACtB,MAAM,oBAAoB,CAAC,QAAQ,QAAQ,KAAK;QAC9C,MAAM,UAAU;eAAI;SAAS;QAC7B,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG;QACtC,YAAY;IACd;IAEA,qBAAqB;IACrB,MAAM,mBAAmB,CAAC,QAAQ,QAAQ;QACxC,MAAM,UAAU;eAAI;SAAS;QAC7B,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG;QACvC,YAAY;IACd;IAEA,6BAA6B;IAC7B,MAAM,yBAAyB,CAAC;QAC9B,cAAc;eAAI,EAAE,MAAM,CAAC,KAAK;SAAC;IACnC;IAEA,cAAc;IACd,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YACxB,SAAS,MAAM,CAAC,eAAe;YAC/B,SAAS,MAAM,CAAC,YAAY;YAC5B,SAAS,MAAM,CAAC,SAAS;YACzB,SAAS,MAAM,CAAC,cAAc;YAC9B,SAAS,MAAM,CAAC,gBAAgB;YAChC,SAAS,MAAM,CAAC,gBAAgB;YAEhC,WAAW,OAAO,CAAC,CAAC;gBAClB,SAAS,MAAM,CAAC,UAAU;YAC5B;YAEA,MAAM,qBAAqB,SAAS,GAAG,CAAC,CAAC,GAAG,SAAW,CAAC;oBACtD,MAAM,EAAE,IAAI;oBACZ,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,SAAW,CAAC;4BACnC,MAAM,EAAE,IAAI;4BACZ,OAAO,EAAE,KAAK;4BACd,gBAAgB,CAAC,OAAO,EAAE,OAAO,MAAM,EAAE,QAAQ;wBACnD,CAAC;gBACH,CAAC;YAED,SAAS,MAAM,CAAC,YAAY,KAAK,SAAS,CAAC;YAE3C,SAAS,OAAO,CAAC,CAAC,GAAG;gBACnB,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,GAAG;oBACnB,IAAI,EAAE,KAAK,EAAE;wBACX,SAAS,MAAM,CAAC,CAAC,OAAO,EAAE,OAAO,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK;oBAC5D;gBACF;YACF;YAEA,MAAM,QAAQ,MAAM;YAEpB,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,oBAAoB,UAAU;gBACzD,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAC9C;YAEA,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;gBACpB,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO;gBAC9B,QAAQ;gBACR,eAAe;gBACf,YAAY;gBACZ,SAAS;gBACT,cAAc;gBACd,gBAAgB;gBAChB,gBAAgB;gBAChB,cAAc,EAAE;gBAChB,YAAY,EAAE;YAChB,OAAO;gBACL,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO;YAC9B;QACF,EAAE,OAAO,KAAK;YACZ,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC,IAAI,QAAQ,EAAE,MAAM,WAAW,IAAI,OAAO;QACxD,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCAEtC,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,QAAQ;;;;;;kCAEV,6LAAC;wBACC,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,QAAQ;;;;;;kCAEV,6LAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wBAC3C,QAAQ;;;;;;kCAIV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,QAAQ;gCACR,KAAI;gCACJ,MAAK;;;;;;0CAEP,6LAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC7C,QAAQ;gCACR,KAAI;gCACJ,MAAK;;;;;;;;;;;;kCAKT,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;gCAC/C,QAAQ;gCACR,KAAI;gCACJ,MAAK;;;;;;0CAEP,6LAAC;gCACC,MAAK;gCACL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;gCAC/C,QAAQ;gCACR,KAAI;gCACJ,MAAK;;;;;;;;;;;;kCAKT,6LAAC;;0CACC,6LAAC;gCAAM,WAAU;0CAA2B;;;;;;0CAC5C,6LAAC;gCACC,MAAK;gCACL,QAAO;gCACP,QAAQ;gCACR,UAAU;gCACV,WAAU;gCACV,QAAQ;;;;;;;;;;;;kCAKZ,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA6B;;;;;;4BAC1C,SAAS,GAAG,CAAC,CAAC,SAAS,uBACtB,6LAAC;oCAAiB,WAAU;;sDAC1B,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,WAAU;4CACV,OAAO,QAAQ,IAAI;4CACnB,UAAU,CAAC,IAAM,oBAAoB,QAAQ,EAAE,MAAM,CAAC,KAAK;4CAC3D,QAAQ;;;;;;wCAGT,QAAQ,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,uBAC1B,6LAAC;gDAEC,WAAU;;kEAEV,6LAAC;wDACC,WAAU;wDACV,OAAO,MAAM,IAAI;wDACjB,UAAU,CAAC,IACT,kBAAkB,QAAQ,QAAQ,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAE1D,QAAQ;;0EAER,6LAAC;gEAAO,OAAM;0EAAG;;;;;;4DAChB,OAAO,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,0BAC3B,6LAAC;oEAAuB,OAAO;8EAC5B;mEADU;;;;;;;;;;;kEAMjB,6LAAC;wDACC,WAAU;wDACV,OAAO;4DAAE,iBAAiB,SAAS,CAAC,MAAM,IAAI,CAAC,IAAI;wDAAO;;;;;;kEAG5D,6LAAC;wDACC,MAAK;wDACL,aAAY;wDACZ,WAAU;wDACV,OAAO,MAAM,KAAK;wDAClB,UAAU,CAAC,IACT,kBAAkB,QAAQ,QAAQ,SAAS,EAAE,MAAM,CAAC,KAAK;wDAE3D,QAAQ;wDACR,KAAI;wDACJ,MAAK;;;;;;kEAGP,6LAAC;wDACC,MAAK;wDACL,QAAO;wDACP,WAAU;wDACV,UAAU,CAAC,IACT,iBAAiB,QAAQ,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;wDAEpD,QAAQ;;;;;;;+CA5CL;;;;;sDAiDT,6LAAC;4CACC,MAAK;4CACL,WAAU;4CACV,SAAS,IAAM,eAAe;sDAC/B;;;;;;;mCAjEO;;;;;0CAuEZ,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,SAAS;0CACV;;;;;;;;;;;;kCAMH,6LAAC;wBACC,MAAK;wBACL,WAAW,CAAC,oCAAoC,EAC9C,UAAU,mCAAmC,iCAC7C;wBACF,UAAU;kCAET,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;AAKvC;GAjTwB;;QACD,yHAAA,CAAA,gBAAa;;;KADZ"}},
    {"offset": {"line": 472, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}